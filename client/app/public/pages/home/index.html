<template name="publicPagesHome">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" integrity="sha512-tS3S5qG0BlhnQROyJXvNjeEM4UpMXHrQfTGmbQ1gKmelCxlSEBUaxhRBj/EFTzpbP4RVSrpEikbmdJobCvhE3g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  {{#let _recentMovie = (state.get 'recentMovie') _tags = (state.get 'tags')}}
  <div class="container brd-homepage">
    <h3>Top Recent</h3>
    <div class="row">
      <div class="col-md-12 brd-top-slider">
        <div class="owl-carousel owl-theme">
          {{#each _recentMovie.movie}}
          <div class="item">
            <a href="/movie/{{_id}}">
              <img src="{{cover_url}}" alt="{{title}}" class="img-thumbnail rounded">
            </a>
          </div>
          {{/each}}
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-9 brd-homepage-main">
        {{>publicComponentsMovieList
          title = "Top Movies"
          displayCol = "4"
          pageItem = 9
          sortArea = "views"
          sortType = "desc"
        }}
      </div>
      <div class="col-md-3 brd-homepage-sidebar">
        <h4>Category</h4>
        {{#let _category = (state.get 'category') }}
        <div class="sidebar-list" style="height: 500px;">
          {{#each _category}}
          <a href="/category/{{_id}}" class="sidebar-list-item">{{title}}</a>
          {{/each}}
        </div>
        {{/let}}
        <h4>Tags</h4>
        <div class="sidebar-list" style="height: 500px;">
          {{#each _tags}}
          <a href="/tags/{{this}}" class="sidebar-list-item">{{this}}</a>
          {{/each}}
        </div>
      </div>
    </div>
  </div>
  {{/let}}
  <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js" integrity="sha512-bPs7Ae6pVvhOSiIcyUClR7/q2OAsRiovw4vAkX+zJbw3ShAeeqezq50RIIcIURq7Oa20rW2n2q+fyXBNcU9lrw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script>
    jQuery(document).ready(function($) {
      setTimeout(() => {
        $('.owl-carousel').owlCarousel({
          loop:true,
          margin:10,
          nav:false,
          responsive:{
              0:{
                  items:2
              },
              600:{
                  items:3
              },
              1000:{
                  items:5
              }
          }
        });
      }, 500);
    });
  </script>
</template>